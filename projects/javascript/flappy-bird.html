<!DOCTYPE html>
<html>
<head>
    <title>Flappy Bird</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            background: #2c3e50;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        #game-container {
            position: relative;
            width: 400px;
            height: 600px;
            background: #70C5CE;
            border: 2px solid #3498db;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0,0,0,0.3);
        }

        .background {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmUvbnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjlDMkY4NDQ5QzU1MTFFNDg0NDFFNDYwNEYwMDc4RTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjlDMkY4NDU5QzU1MTFFNDg0NDFFNDYwNEYwMDc4RTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGOUMyRjg0MjlDNTUxMUU0ODQ0MUU0NjA0RjAwNzhFNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGOUMyRjg0MzlDNTUxMUU0ODQ0MUU0NjA0RjAwNzhFNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkJFWv4AAABESURBVHja7JYxCgAgDMTi/3/sjODQxRhzgztIIZ0ud6mqPtWAiPxeEcHg4ODg4ODg4ODg4ODg4ODg4ODg4PxxzwIMADxjBjjs/cHRAAAAAElFTkSuQmCC');
            background-repeat: repeat-x;
            background-position: bottom;
            z-index: 1;
        }

        #ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 112px;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmUvbnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY5QzJGODI5QzU1MTFFNDg0NDFFNDYwNEYwMDc4RTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY5QzJGODM5QzU1MTFFNDg0NDFFNDYwNEYwMDc4RTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4RjlDMkY4MDlDNTUxMUU0ODQ0MUU0NjA0RjAwNzhFNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RjlDMkY4MTlDNTUxMUU0ODQ0MUU0NjA0RjAwNzhFNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqW7+yQAAABgSURBVHja7NgxDgAgCERR4/0v7AQSTQwD+F+ZhYWXAEt0d1PxUlUvqKqPW0QEg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4PzO3cBBgBGGwZQKNvK0QAAAABJRU5ErkJggg==');
            background-repeat: repeat-x;
            animation: scrollGround 3s linear infinite;
            z-index: 2;
        }

        #bird {
            position: absolute;
            width: 34px;
            height: 24px;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYCAYAAACfpi8JAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmUvbnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjlDMkY4NDQ5QzU1MTFFNDg0NDFFNDYwNEYwMDc4RTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjlDMkY4NDU5QzU1MTFFNDg0NDFFNDYwNEYwMDc4RTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGOUMyRjg0MjlDNTUxMUU0ODQ0MUU0NjA0RjAwNzhFNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGOUMyRjg0MzlDNTUxMUU0ODQ0MUU0NjA0RjAwNzhFNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkJFWv4AAABESURBVHja7JYxCgAgDMTi/3/sjODQxRhzgztIIZ0ud6mqPtWAiPxeEcHg4ODg4ODg4ODg4ODg4ODg4ODg4PxxzwIMADxjBjjs/cHRAAAAAElFTkSuQmCC');
            transform-origin: center;
            transition: transform 0.1s;
            z-index: 10;
        }

        .pipe {
            position: absolute;
            width: 60px;
            background: #73C908;
            border: 2px solid #557F19;
            z-index: 1;
        }

        .pipe::after {
            content: '';
            position: absolute;
            width: 70px;
            height: 20px;
            background: #73C908;
            left: -5px;
            border: 2px solid #557F19;
        }

        .pipe.top::after {
            bottom: -20px;
            border-radius: 0 0 5px 5px;
        }

        .pipe.bottom::after {
            top: -20px;
            border-radius: 5px 5px 0 0;
        }

        #score {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 48px;
            font-family: "Press Start 2P", monospace;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            z-index: 3;
        }

        #high-score {
            position: absolute;
            top: 70px;
            left: 20px;
            color: #f1c40f;
            font-size: 24px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        #menu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            color: white;
            z-index: 100;
        }

        .button {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            text-decoration: none;
        }

        #home-button {
            position: fixed;
            top: 20px;
            right: 20px;
        }

        .cloud {
            display: none;
        }

        @keyframes scrollGround {
            from { background-position: 0 0; }
            to { background-position: -47px 0; }
        }

        @keyframes flap {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(-25deg) translateY(-5px); }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="bird"></div>
        <div id="score">0</div>
        <div id="high-score">Best: 0</div>
    </div>

    <a href="game-portal.html" class="button" id="home-button">Home</a>

    <div id="menu">
        <h2>Flappy Bird</h2>
        <p>Press Space to flap</p>
        <div class="button" onclick="startGame()">Start Game</div>
    </div>

    <script>
        const gameContainer = document.getElementById('game-container');
        const bird = document.getElementById('bird');
        const scoreDisplay = document.getElementById('score');
        const highScoreDisplay = document.getElementById('high-score');
        const menu = document.getElementById('menu');

        let birdY = 300;
        let birdVelocity = 0;
        let score = 0;
        let highScore = 0;
        let gameLoop;
        let pipes = [];
        let clouds = [];
        let gameRunning = false;

        function createPipes() {
            const gap = 150;
            const pipeTop = document.createElement('div');
            const pipeBottom = document.createElement('div');
            const minHeight = 50;
            const maxHeight = 250;
            const height = Math.random() * (maxHeight - minHeight) + minHeight;

            pipeTop.className = 'pipe top';
            pipeBottom.className = 'pipe bottom';

            pipeTop.style.height = height + 'px';
            pipeTop.style.left = '400px';
            pipeBottom.style.height = (600 - height - gap) + 'px';
            pipeBottom.style.left = '400px';
            pipeBottom.style.bottom = '0';

            gameContainer.appendChild(pipeTop);
            gameContainer.appendChild(pipeBottom);

            return {
                top: pipeTop,
                bottom: pipeBottom,
                x: 400,
                counted: false
            };
        }

        function createCloud() {
            const cloud = document.createElement('div');
            cloud.className = 'cloud';
            cloud.style.width = (Math.random() * 60 + 40) + 'px';
            cloud.style.height = (Math.random() * 30 + 20) + 'px';
            cloud.style.top = (Math.random() * 300) + 'px';
            cloud.style.animationDuration = (Math.random() * 10 + 10) + 's';
            gameContainer.appendChild(cloud);
            return cloud;
        }

        function updateGame() {
            if (!gameRunning) return;

            // Update bird
            birdVelocity += 0.5;
            birdY += birdVelocity;
            bird.style.top = birdY + 'px';
            bird.style.transform = `rotate(${Math.min(birdVelocity * 3, 70)}deg)`;

            // Check collisions
            if (birdY < 0 || birdY > 500) {
                endGame();
                return;
            }

            // Update pipes
            pipes.forEach((pipe, index) => {
                pipe.x -= 1.5;
                pipe.top.style.left = pipe.x + 'px';
                pipe.bottom.style.left = pipe.x + 'px';

                // Check collision
                const birdRect = bird.getBoundingClientRect();
                const topRect = pipe.top.getBoundingClientRect();
                const bottomRect = pipe.bottom.getBoundingClientRect();

                if (birdRect.right > topRect.left && 
                    birdRect.left < topRect.right && 
                    (birdRect.top < topRect.bottom || birdRect.bottom > bottomRect.top)) {
                    endGame();
                    return;
                }

                // Score points
                if (!pipe.counted && pipe.x < 160) {
                    score++;
                    scoreDisplay.textContent = score;
                    // Add score animation
                    const scoreAnim = document.createElement('div');
                    scoreAnim.textContent = '+1';
                    scoreAnim.style.cssText = `
                        position: absolute;
                        left: ${bird.offsetLeft}px;
                        top: ${bird.offsetTop - 20}px;
                        color: #f1c40f;
                        font-size: 24px;
                        font-weight: bold;
                        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
                        animation: floatUp 1s forwards;
                    `;
                    gameContainer.appendChild(scoreAnim);
                    setTimeout(() => scoreAnim.remove(), 1000);
                    pipe.counted = true;
                }

                // Remove off-screen pipes
                if (pipe.x < -100) {
                    pipe.top.remove();
                    pipe.bottom.remove();
                    pipes.splice(index, 1);
                }
            });

            // Create new pipes
            if (pipes.length === 0 || pipes[pipes.length - 1].x < 250) {
                pipes.push(createPipes());
            }

            // Create clouds
            if (Math.random() < 0.005) {
                clouds.push(createCloud());
            }

            // Remove off-screen clouds
            clouds = clouds.filter(cloud => {
                if (cloud.getBoundingClientRect().right < 0) {
                    cloud.remove();
                    return false;
                }
                return true;
            });
        }

        function flap() {
            if (!gameRunning) return;
            birdVelocity = -7;
            bird.style.animation = 'flap 0.2s';
            setTimeout(() => bird.style.animation = '', 200);
            // Add flap effect
            const flapEffect = document.createElement('div');
            flapEffect.style.cssText = `
                position: absolute;
                left: ${bird.offsetLeft - 10}px;
                top: ${bird.offsetTop + 20}px;
                width: 20px;
                height: 20px;
                background: rgba(255,255,255,0.5);
                border-radius: 50%;
                animation: fadeOut 0.5s forwards;
            `;
            gameContainer.appendChild(flapEffect);
            setTimeout(() => flapEffect.remove(), 500);
        }

        function startGame() {
            // Add background
            const background = document.createElement('div');
            background.className = 'background';
            gameContainer.appendChild(background);

            // Add ground
            const ground = document.createElement('div');
            ground.id = 'ground';
            gameContainer.appendChild(ground);

            // Clear previous game
            pipes.forEach(pipe => {
                pipe.top.remove();
                pipe.bottom.remove();
            });
            clouds.forEach(cloud => cloud.remove());
            pipes = [];
            clouds = [];

            // Reset game state
            birdY = 300;
            birdVelocity = 0;
            score = 0;
            bird.style.top = birdY + 'px';
            bird.style.transform = 'rotate(0deg)';
            scoreDisplay.textContent = '0';
            menu.style.display = 'none';
            gameRunning = true;

            // Start game loop
            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(updateGame, 16);
        }

        function endGame() {
            gameRunning = false;
            clearInterval(gameLoop);
            if (score > highScore) {
                highScore = score;
                highScoreDisplay.textContent = `Best: ${highScore}`;
            }
            menu.innerHTML = `
                <h2>Game Over!</h2>
                <p>Score: ${score}</p>
                <p>Best: ${highScore}</p>
                <div class="button" onclick="startGame()">Play Again</div>
            `;
            menu.style.display = 'block';
        }

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                flap();
            }
        });

        // Mobile support
        document.addEventListener('touchstart', (e) => {
            e.preventDefault();
            flap();
        });

        // Add fadeOut animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeOut {
                to { transform: scale(2); opacity: 0; }
            }
            @keyframes floatUp {
                from { transform: translateY(0); opacity: 1; }
                to { transform: translateY(-50px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html> 