<!DOCTYPE html>
<html>
<head>
    <title>Brick Breaker</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #2c3e50;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        #game-container {
            position: relative;
            width: 800px;
            height: 600px;
            background: #34495e;
            border: 2px solid #3498db;
        }

        #paddle {
            position: absolute;
            width: 100px;
            height: 20px;
            background: #3498db;
            bottom: 20px;
            left: 350px;
            border-radius: 10px;
        }

        #ball {
            position: absolute;
            width: 15px;
            height: 15px;
            background: #e74c3c;
            border-radius: 50%;
        }

        .brick {
            position: absolute;
            width: 75px;
            height: 20px;
            border-radius: 5px;
            transition: opacity 0.2s;
        }

        #score {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 24px;
        }

        #lives {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 24px;
        }

        #menu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            color: white;
            z-index: 100;
        }

        .button {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            text-decoration: none;
        }

        #home-button {
            position: fixed;
            top: 20px;
            right: 20px;
        }

        .power-up {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="score">Score: 0</div>
        <div id="lives">Lives: 3</div>
        <div id="paddle"></div>
        <div id="ball"></div>
    </div>

    <a href="game-portal.html" class="button" id="home-button">Home</a>

    <div id="menu">
        <h2>Brick Breaker</h2>
        <p>Use left and right arrows to move the paddle</p>
        <p>Break all bricks to win!</p>
        <div class="button" onclick="startGame()">Start Game</div>
    </div>

    <script>
        const gameContainer = document.getElementById('game-container');
        const paddle = document.getElementById('paddle');
        const ball = document.getElementById('ball');
        const scoreDisplay = document.getElementById('score');
        const livesDisplay = document.getElementById('lives');
        const menu = document.getElementById('menu');

        let score = 0;
        let lives = 3;
        let gameRunning = false;
        let ballX = 400;
        let ballY = 300;
        let ballSpeedX = 5;
        let ballSpeedY = -5;
        let paddleX = 350;
        let powerUps = [];
        let gameLoop;

        const colors = ['#e74c3c', '#e67e22', '#f1c40f', '#2ecc71', '#3498db'];

        function createBricks() {
            const brickWidth = 75;
            const brickHeight = 20;
            const rows = 5;
            const cols = 10;
            const padding = 5;

            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const brick = document.createElement('div');
                    brick.className = 'brick';
                    brick.style.left = (j * (brickWidth + padding)) + padding + 'px';
                    brick.style.top = (i * (brickHeight + padding)) + padding + 50 + 'px';
                    brick.style.background = colors[i];
                    gameContainer.appendChild(brick);
                }
            }
        }

        function createPowerUp(x, y) {
            const powerUp = document.createElement('div');
            powerUp.className = 'power-up';
            powerUp.style.left = x + 'px';
            powerUp.style.top = y + 'px';
            powerUp.style.background = '#9b59b6';
            gameContainer.appendChild(powerUp);
            
            return {
                element: powerUp,
                x: x,
                y: y,
                type: 'expand', // could add more types later
                speed: 3
            };
        }

        function movePaddle(e) {
            if (!gameRunning) return;

            const containerRect = gameContainer.getBoundingClientRect();
            if (e.key === 'ArrowLeft') {
                paddleX = Math.max(0, paddleX - 20);
            } else if (e.key === 'ArrowRight') {
                paddleX = Math.min(containerRect.width - 100, paddleX + 20);
            }
            paddle.style.left = paddleX + 'px';
        }

        function updateBall() {
            ballX += ballSpeedX;
            ballY += ballSpeedY;

            // Wall collisions
            if (ballX <= 0 || ballX >= 785) ballSpeedX *= -1;
            if (ballY <= 0) ballSpeedY *= -1;

            // Paddle collision
            if (ballY >= 560 && ballY <= 570 &&
                ballX >= paddleX - 15 && ballX <= paddleX + 100) {
                ballSpeedY *= -1;
                // Adjust angle based on where ball hits paddle
                const hitPosition = (ballX - paddleX) / 100;
                ballSpeedX = 8 * (hitPosition - 0.5);
            }

            // Ball lost
            if (ballY > 600) {
                lives--;
                livesDisplay.textContent = `Lives: ${lives}`;
                if (lives <= 0) {
                    endGame();
                } else {
                    resetBall();
                }
            }

            // Brick collisions
            const bricks = document.querySelectorAll('.brick');
            bricks.forEach(brick => {
                const brickRect = brick.getBoundingClientRect();
                const ballRect = ball.getBoundingClientRect();

                if (ballRect.left < brickRect.right &&
                    ballRect.right > brickRect.left &&
                    ballRect.top < brickRect.bottom &&
                    ballRect.bottom > brickRect.top) {
                    
                    brick.remove();
                    ballSpeedY *= -1;
                    score += 10;
                    scoreDisplay.textContent = `Score: ${score}`;

                    // 20% chance to spawn power-up
                    if (Math.random() < 0.2) {
                        powerUps.push(createPowerUp(brickRect.left, brickRect.top));
                    }

                    // Check if all bricks are cleared
                    if (document.querySelectorAll('.brick').length === 0) {
                        victory();
                    }
                }
            });

            // Update power-ups
            powerUps.forEach((powerUp, index) => {
                powerUp.y += powerUp.speed;
                powerUp.element.style.top = powerUp.y + 'px';

                // Check for paddle collision
                if (powerUp.y >= 560 && powerUp.y <= 580 &&
                    powerUp.x >= paddleX - 20 && powerUp.x <= paddleX + 100) {
                    activatePowerUp(powerUp);
                    powerUp.element.remove();
                    powerUps.splice(index, 1);
                }

                // Remove if missed
                if (powerUp.y > 600) {
                    powerUp.element.remove();
                    powerUps.splice(index, 1);
                }
            });

            ball.style.left = ballX + 'px';
            ball.style.top = ballY + 'px';
        }

        function activatePowerUp(powerUp) {
            paddle.style.width = '150px';
            setTimeout(() => {
                paddle.style.width = '100px';
            }, 10000);
        }

        function resetBall() {
            ballX = paddleX + 50;
            ballY = 550;
            ballSpeedX = 5;
            ballSpeedY = -5;
        }

        function startGame() {
            menu.style.display = 'none';
            score = 0;
            lives = 3;
            scoreDisplay.textContent = `Score: ${score}`;
            livesDisplay.textContent = `Lives: ${lives}`;
            gameRunning = true;
            
            // Clear existing bricks and power-ups
            document.querySelectorAll('.brick').forEach(brick => brick.remove());
            powerUps.forEach(powerUp => powerUp.element.remove());
            powerUps = [];
            
            createBricks();
            resetBall();
            
            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(updateBall, 16);
        }

        function endGame() {
            gameRunning = false;
            clearInterval(gameLoop);
            menu.innerHTML = `
                <h2>Game Over!</h2>
                <p>Final Score: ${score}</p>
                <div class="button" onclick="startGame()">Play Again</div>
            `;
            menu.style.display = 'block';
        }

        function victory() {
            gameRunning = false;
            clearInterval(gameLoop);
            menu.innerHTML = `
                <h2>Victory!</h2>
                <p>Final Score: ${score}</p>
                <div class="button" onclick="startGame()">Play Again</div>
            `;
            menu.style.display = 'block';
        }

        document.addEventListener('keydown', movePaddle);
    </script>
</body>
</html> 